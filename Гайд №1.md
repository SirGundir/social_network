Как написать свой микросервис за 10 минут.

Создадим базовую конфигурацию.

![[Pasted image 20250223164907.png]]

Config.go - Файл для получения переменных из .env
.env - файл куда пользователья вносит все свои секретные данные типа пароля от бд и т.д.

![[Pasted image 20250223165054.png]]

Здесь импорт нужных библиотек
Создание структуры для хранения переменных
Функция для получения информации из файла

db.go

![[Pasted image 20250223165256.png]]

Функция для подключения к бд. В данный момент sqlite.
Так же прописываем автомиграции для бд.
Миграция - когда бд обновляется в структуре мы должны сделать миграция к новому состоянию бд.

Модели - представление таблиц бд в виде объекта языка программирования.

![[Pasted image 20250223165740.png]]

Создаем пользовательскую таблицу USer

И data transfer object для передачи данных между слоями(сервисы, роуты и дб) и валидации этих данных. 

По сути три эти папки - это общие файлы.

Еще парочка общих файлов

![[Pasted image 20250223170343.png]]

.env - секретные данные
.env.example - пример того, какие переменные надо засунуть в енв для других программистов при запуске.

![[Pasted image 20250223170447.png]]
![[Pasted image 20250223170458.png]]

.gitignore - файл для указания тех файлов, которые гит будет игнорить. Это нужно чтобы случайно не залить важные файлы в репозиторий. 

![[Pasted image 20250223170517.png]]

Dockerfile - файл для создания докер образа

![[Pasted image 20250223170718.png]]
![[Pasted image 20250223170810.png]]

Докер compose нужен для быстрого и удобного запуска нескольких контейнеров одновременно. 

Ну и main.go - в нем запускаем бд, создаем экземпляр сервиса и запускам приложение


![[Pasted image 20250223185240.png]]

Сервисы - логика
Роуты - это непосредственно то куда мы направляем запрос
http://localhost:8080/auth/login
Например вот так. Так же есть несколько методов обращения. Есть Post, Get и другие. Об этом почитать отдельно.

![[Pasted image 20250223185508.png]]

Вот две функции. Первая - для регистрации, вторя для логина.

А в ротуах создаем эти самые роуты, получаем в них данные.

![[Pasted image 20250223185948.png]]

Что еще важно учесть? 

![[Pasted image 20250223185126.png]]

Файлы с библиотеками.
go mod init social-network
go mod tidy

Две консольные команды для того чтобы создать нужные нам файлы

И вот еще. Мы создаем jwt token для каждого пользователя. В других сервисах именно при передачи этого ключа мы будем определять какой пользователь отправил запрос.

